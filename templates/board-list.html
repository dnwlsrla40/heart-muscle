<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta writer="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
          integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns"
            crossorigin="anonymous"></script>

<!--    Fontawesome library-->
    <script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>

    <title>득근일지</title>
    <script>
        $(function () {
            showLog();
        });

        function showLog() {
            $.ajax({
                type: "GET",
                url: "/api/board",
                data: {},
                success: function (response) {
                    let logs = response['all_logs'];
                    for (let i = 0; i < logs.length; i++){
                        let created_at = logs[i]['created_at']
                        let writer = logs[i]['writer']
                        let title = logs[i]['title']
                        let content = logs[i]['content']
                        let like = logs[i]['like']

                        let temp_html = `<tr>
                                             <th scope="row">${i+1}</th>
                                             <td>${created_at}</td>
                                             <td>${writer}</td>
                                             <td>${title}</td>
                                              <td><a onclick="" href="/detailed_post">${content}<a></td>
                                              <td>
                                                  <a href="#" target="_blank" class="star-writer title is-4">좋아요: ${like}</a>
                                                  <a href="#" onclick="likeStar('${writer}')" class="card-footer-item has-text-info"><span class="icon"><i class="fas fa-thumbs-up"></i></span></a>
                                              </td>
                                          </tr>`
                        $('#log_table').append(temp_html)
                    }
                }
            })
        }

        function likeStar(writer) {
            $.ajax({
                type: 'POST',
                url: '/api/like',
                data: {writer_give:writer},
                success: function (response) {
                    alert(response['msg']);
                    window.location.reload()
                }
            });
        }

    </script>

    <style>
        #inputGroup-sizing-default {
            padding-right: 20px;
        }

        a{
            display: block;
        }
    </style>
</head>
<body>
    <table class="table">
        <thead>
        <tr>
            <th scope="col">번호</th>
            <th scope="col">작성시간</th>
            <th scope="col">작성자</th>
            <th scope="col">제목</th>
            <th scope="col">추천</th>
            <th scope="col">조회수</th>
        </tr>
        </thead>
        <tbody id="log_table">

        </tbody>

    </table>
</body>
</html>